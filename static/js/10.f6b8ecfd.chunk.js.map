{"version":3,"sources":["action.js","hoc/authLayout.js","pages/auth/LoginPage.js"],"names":["instance","axios","create","baseURL","process","interceptors","request","use","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","wrap","_context","prev","next","headers","abrupt","stop","_x","apply","arguments","response","status","window","location","href","authLayout","ChildComponent","_React$Component","_inherits","AuthLayout","_super","_createSuper","props","_this","_classCallCheck","call","state","_createClass","key","value","_jsx","_Fragment","children","className","_jsxs","alt","src","_objectSpread","this","React","Component","localStorage","clear","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","handleSubmit","event","_response$data","preventDefault","setItem","action","post","sent","data","token","role","get","then","_response$data2","_response$data2$users","user","users","find","JSON","stringify","catch","error","t0","Swal","fire","message","onSubmit","htmlFor","type","id","placeholder","name","onChange","target"],"mappings":"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","file":"static/js/10.f6b8ecfd.chunk.js","sourcesContent":["import axios from 'axios';\r\n// import { createProxyMiddleware } from 'http-proxy-middleware';\r\n\r\nconst instance = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n});\r\n\r\ninstance.interceptors.request.use(async (config) => {\r\n  // // Create a new http-proxy-middleware instance based on the config.proxy value\r\n  // if (config.proxy) {\r\n  //   const proxy = createProxyMiddleware({\r\n  //     target: config.proxy,\r\n  //     changeOrigin: true,\r\n  //   });\r\n  //   // Use the http-proxy-middleware instance to forward the request to the target server\r\n  //   config.baseURL = config.proxy;\r\n  //   config.url = config.url.replace(config.baseURL, '');\r\n  //   return await proxy(config);\r\n  // }\r\n  config.headers['Content-Type'] = 'application/json';\r\n  config.headers['X-Auth-Secret-Key'] = process.env.REACT_APP_API_KEY;\r\n  // config.headers['X-Forwarded-Host'] = process.env.REACT_APP_API_URL;\r\n  return config;\r\n});\r\n\r\ninstance.interceptors.response.use(response => {\r\n  if (response.status === 401) {\r\n    // Handle 401 errors\r\n    window.location.href = '/login';\r\n  }\r\n  return response;\r\n});\r\n\r\nexport default instance;","import React from \"react\";\r\nconst authLayout = (ChildComponent) => {\r\n    class AuthLayout extends React.Component {\r\n        constructor(props){\r\n            super(props);\r\n    \r\n            this.state = {};\r\n        }\r\n\r\n        render(){\r\n            return <>\r\n            <section className=\"vh-100\">\r\n                <div className=\"container-fluid h-custom\">\r\n                    <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n                        <div className=\"col-md-3 col-lg-3 col-xl-3\">\r\n                            <img alt=\"hey\" src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\" className=\"img-fluid\"/>\r\n                        </div>\r\n                        <div className=\"col-md-10 col-lg-8 col-xl-6 offset-xl-1\">\r\n                            <ChildComponent {...this.props} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </>\r\n        }\r\n    }\r\n\r\n    return AuthLayout;\r\n}\r\n\r\nexport default authLayout;","import React, { useState } from \"react\";\r\nimport \"../../assets/css/login.css\";\r\nimport authLayout from \"../../hoc/authLayout\";\r\nimport action from \"../../action\";\r\nimport Swal from 'sweetalert2';\r\n\r\nconst LoginPage = () => {\r\n    localStorage.clear();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        localStorage.setItem('email', email);\r\n\r\n        try {\r\n            const response = await action.post('/user/login', {\r\n                email: email,\r\n                password: password\r\n            }, {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            localStorage.setItem('token', response.data.token);\r\n            //console.log(response.data.role);\r\n            localStorage.setItem('role', response.data.role);\r\n            await action.get(`/user/list`, {\r\n                headers: {\r\n                    'Authorization': response?.data?.token,\r\n                    'X-Auth-Secret-Key': process.env.REACT_APP_API_KEY\r\n                }\r\n            })\r\n                .then((response) => {\r\n                  //  console.log(response.data);\r\n                    const user = response.data?.users?.find((user) => user.email === email);\r\n                    if (user) {\r\n                        localStorage.setItem('user', JSON.stringify(user));\r\n                    } else {\r\n                        localStorage.setItem('user', null);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                   // console.log(error);\r\n                    localStorage.setItem('user', null);\r\n                });\r\n            if (response.data.role === \"Admin\") {\r\n                window.location.href = '/user-list';\r\n            }\r\n            else if (response.data.role === 'Agent') {\r\n                window.location.href = '/statement';\r\n            }\r\n            else if (response.data.role === 'Customer') {\r\n                window.location.href = '/statement';\r\n            }\r\n            else if (response.data.role === 'Merchant') {\r\n                window.location.href = '/statement';\r\n            }\r\n            else {\r\n                localStorage.clear();\r\n                window.location.href = '/login';\r\n            }\r\n        } catch (error) {\r\n            //console.log(error);\r\n            Swal.fire(\r\n                'Error',\r\n                error.response.data.message || 'Something went wrong',\r\n                'error'\r\n            );\r\n        }\r\n    };\r\n\r\n    return <>\r\n        <form className=\"login-form\" onSubmit={handleSubmit}>\r\n        <h1 className=\"mt-5\">Welcome to D-money Finance</h1>\r\n            <div className=\"d-flex align-items-center my-4 mt-5\">\r\n                <h1 className=\"text-center fw-normal mb-0 me-3\">Sign In</h1>\r\n            </div>\r\n            {/* <!-- Email input --> */}\r\n            <div className=\"form-outline mb-4\">\r\n                <label className=\"form-label\" htmlFor=\"form3Example3\">Email address</label>\r\n                <input type=\"email\" id=\"form3Example3\" className=\"form-control form-control-lg\"\r\n                    placeholder=\"Enter a valid email address\" name=\"username\"\r\n                    value={email} onChange={(event) => setEmail(event.target.value)}\r\n                />\r\n            </div>\r\n\r\n            {/* <!-- Password input --> */}\r\n            <div className=\"form-outline mb-3\">\r\n                <label className=\"form-label\" htmlFor=\"form3Example4\">Password</label>\r\n                <input type=\"password\" id=\"form3Example4\" className=\"form-control form-control-lg\"\r\n                    placeholder=\"Enter password\" value={password} onChange={(event) => setPassword(event.target.value)} />\r\n            </div>\r\n            <div className=\"text-center text-lg-start mt-4 pt-2\">\r\n                <button type=\"submit\" className=\"btn btn-primary btn-lg\">Login</button>\r\n            </div>\r\n        </form>\r\n    </>\r\n}\r\n\r\nexport default authLayout(LoginPage);"],"sourceRoot":""}