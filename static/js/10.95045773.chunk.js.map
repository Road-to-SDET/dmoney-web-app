{"version":3,"sources":["hoc/authLayout.js","pages/auth/LoginPage.js"],"names":["authLayout","ChildComponent","_React$Component","_inherits","AuthLayout","_super","_createSuper","props","_this","_classCallCheck","call","state","_createClass","key","value","_jsx","_Fragment","children","className","_jsxs","alt","src","_objectSpread","this","React","Component","localStorage","clear","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_response$data","response","wrap","_context","prev","next","preventDefault","setItem","axios","post","headers","sent","data","token","console","log","role","get","process","then","_response$data2","_response$data2$users","user","users","find","JSON","stringify","catch","error","window","location","href","t0","Swal","fire","message","stop","_x","apply","arguments","onSubmit","htmlFor","type","id","placeholder","name","onChange","target"],"mappings":"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","file":"static/js/10.95045773.chunk.js","sourcesContent":["import React from \"react\";\r\nconst authLayout = (ChildComponent) => {\r\n    class AuthLayout extends React.Component {\r\n        constructor(props){\r\n            super(props);\r\n    \r\n            this.state = {};\r\n        }\r\n\r\n        render(){\r\n            return <>\r\n            <section className=\"vh-100\">\r\n                <div className=\"container-fluid h-custom\">\r\n                    <div className=\"row d-flex justify-content-center align-items-center h-100\">\r\n                        <div className=\"col-md-3 col-lg-3 col-xl-3\">\r\n                            <img alt=\"hey\" src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\" className=\"img-fluid\"/>\r\n                        </div>\r\n                        <div className=\"col-md-10 col-lg-8 col-xl-6 offset-xl-1\">\r\n                            <ChildComponent {...this.props} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </>\r\n        }\r\n    }\r\n\r\n    return AuthLayout;\r\n}\r\n\r\nexport default authLayout;","import React, { useState } from \"react\";\r\nimport \"../../assets/css/login.css\";\r\nimport authLayout from \"../../hoc/authLayout\";\r\nimport axios from \"axios\";\r\nimport Swal from 'sweetalert2';\r\n\r\nconst LoginPage = () => {\r\n    localStorage.clear();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        localStorage.setItem('email', email);\r\n\r\n        try {\r\n            const response = await axios.post('/user/login', {\r\n                email: email,\r\n                password: password\r\n            }, {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            });\r\n            localStorage.setItem('token', response.data.token);\r\n            console.log(response.data.role);\r\n            localStorage.setItem('role', response.data.role);\r\n            await axios.get(`/user/list`, {\r\n                headers: {\r\n                    'Authorization': response?.data?.token,\r\n                    'X-Auth-Secret-Key': process.env.REACT_APP_API_KEY\r\n                }\r\n            })\r\n                .then((response) => {\r\n                    console.log(response.data);\r\n                    const user = response.data?.users?.find((user) => user.email === email);\r\n                    if (user) {\r\n                        localStorage.setItem('user', JSON.stringify(user));\r\n                    } else {\r\n                        localStorage.setItem('user', null);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                    localStorage.setItem('user', null);\r\n                });\r\n            if (response.data.role === \"Admin\") {\r\n                window.location.href = '/user-list';\r\n            }\r\n            else if (response.data.role === 'Agent') {\r\n                window.location.href = '/statement';\r\n            }\r\n            else if (response.data.role === 'Customer') {\r\n                window.location.href = '/statement';\r\n            }\r\n            else if (response.data.role === 'Merchant') {\r\n                window.location.href = '/statement';\r\n            }\r\n            else {\r\n                localStorage.clear();\r\n                window.location.href = '/login';\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n            Swal.fire(\r\n                'Error',\r\n                error.response.data.message || 'Something went wrong',\r\n                'error'\r\n            );\r\n        }\r\n    };\r\n\r\n    return <>\r\n        <form className=\"login-form\" onSubmit={handleSubmit}>\r\n        <h1 className=\"mt-5\">Welcome to D-money Finance</h1>\r\n            <div className=\"d-flex align-items-center my-4 mt-5\">\r\n                <h1 className=\"text-center fw-normal mb-0 me-3\">Sign In</h1>\r\n            </div>\r\n            {/* <!-- Email input --> */}\r\n            <div className=\"form-outline mb-4\">\r\n                <label className=\"form-label\" htmlFor=\"form3Example3\">Email address</label>\r\n                <input type=\"email\" id=\"form3Example3\" className=\"form-control form-control-lg\"\r\n                    placeholder=\"Enter a valid email address\" name=\"username\"\r\n                    value={email} onChange={(event) => setEmail(event.target.value)}\r\n                />\r\n            </div>\r\n\r\n            {/* <!-- Password input --> */}\r\n            <div className=\"form-outline mb-3\">\r\n                <label className=\"form-label\" htmlFor=\"form3Example4\">Password</label>\r\n                <input type=\"password\" id=\"form3Example4\" className=\"form-control form-control-lg\"\r\n                    placeholder=\"Enter password\" value={password} onChange={(event) => setPassword(event.target.value)} />\r\n            </div>\r\n            {/* <div className=\"form-outline mb-3\">\r\n                <label className=\"form-label\" htmlFor=\"form3Example4\">Role</label>\r\n                <select className=\"form-select form-select-lg\" value={role} onChange={handleSelectChange}>\r\n                    <option value=\"Admin\">Admin</option>\r\n                    <option value=\"Agent\">Agent</option>\r\n                    <option value=\"Customer\">Customer</option>\r\n\r\n                </select>\r\n            </div> */}\r\n            <div className=\"text-center text-lg-start mt-4 pt-2\">\r\n                <button type=\"submit\" className=\"btn btn-primary btn-lg\">Login</button>\r\n                {/* <p className=\"small fw-bold mt-2 pt-1 mb-0\">Don't have an account? \r\n                    <Link to=\"/register\" className=\"link-danger\">Register</Link></p> */}\r\n            </div>\r\n        </form>\r\n    </>\r\n}\r\n\r\nexport default authLayout(LoginPage);"],"sourceRoot":""}